# ACE-Step 1.5 LoRA è®­ç»ƒæ•™ç¨‹

## ç¡¬ä»¶éœ€æ±‚

| æ˜¾å­˜ | è¯´æ˜ |
|------|------|
| 16 GBï¼ˆæœ€ä½ï¼‰ | é€šå¸¸å¯ç”¨ï¼Œä½†å¤„ç†è¾ƒé•¿æ­Œæ›²æ—¶å¯èƒ½å‡ºç°æ˜¾å­˜ä¸è¶³ |
| 20 GB åŠä»¥ä¸Šï¼ˆæ¨èï¼‰ | å¯å¤„ç†å…¨æ›²é•¿åº¦ï¼Œè®­ç»ƒæ—¶æ˜¾å­˜å ç”¨é€šå¸¸ç»´æŒåœ¨ 17 GB å·¦å³ |

> **æç¤ºï¼š** åœ¨è®­ç»ƒå¼€å§‹ä¹‹å‰çš„é¢„å¤„ç†é˜¶æ®µï¼Œéœ€è¦å¤šæ¬¡é‡å¯ Gradio ä»¥é‡Šæ”¾æ˜¾å­˜ï¼Œå…·ä½“æ—¶æœºä¼šåœ¨åç»­æ­¥éª¤ä¸­è¯´æ˜ã€‚

## å…è´£å£°æ˜

æœ¬æ•™ç¨‹ä½¿ç”¨ **Nayutanæ˜Ÿäºº (NayutalieN)** çš„ä¸“è¾‘ *ãƒŠãƒ¦ã‚¿ãƒ³æ˜Ÿã‹ã‚‰ã®ç‰©ä½“Y*ï¼ˆå…± 13 é¦–æ­Œæ›²ï¼‰ä½œä¸ºæ¼”ç¤ºï¼Œè®­ç»ƒäº† 500 ä¸ª epochï¼ˆbatch size ä¸º 1ï¼‰ã€‚**æœ¬æ•™ç¨‹ä»…ç”¨äºç†è§£ LoRA å¾®è°ƒæŠ€æœ¯çš„æ•™è‚²ç›®çš„ï¼Œè¯·ä½¿ç”¨æ‚¨çš„åŸåˆ›ä½œå“è®­ç»ƒ LoRAã€‚**

ä½œä¸ºå¼€å‘è€…ï¼Œæˆ‘æœ¬äººéå¸¸å–œæ¬¢ Nayutanæ˜Ÿäºº çš„ä½œå“ï¼Œå› æ­¤é€‰ç”¨äº†å…¶ä¸­ä¸€å¼ ä¸“è¾‘ä½œä¸ºç¤ºä¾‹ã€‚å¦‚æœæ‚¨æ˜¯æƒåˆ©æŒæœ‰è€…å¹¶è®¤ä¸ºæœ¬æ•™ç¨‹ä¾µçŠ¯äº†æ‚¨çš„åˆæ³•æƒç›Šï¼Œè¯·ç«‹å³è”ç³»æˆ‘ä»¬ï¼Œæˆ‘ä»¬å°†åœ¨æ”¶åˆ°æœ‰æ•ˆé€šçŸ¥åç§»é™¤ç›¸å…³å†…å®¹ã€‚

æŠ€æœ¯åº”å½“è¢«åˆç†åˆæ³•åœ°ä½¿ç”¨ï¼Œè¯·å°Šé‡è‰ºæœ¯å®¶çš„åˆ›ä½œï¼Œä¸è¦åšå‡º**æŸå®³æˆ–ä¼¤å®³**åŸåˆ›è‰ºæœ¯å®¶çš„å£°èª‰ã€æƒåˆ©æˆ–åˆ©ç›Šçš„è¡Œä¸ºã€‚

---

## æ•°æ®å‡†å¤‡

> **æç¤ºï¼š** å¯¹äºç¨‹åºè„šæœ¬æ“ä½œéƒ¨åˆ†ï¼Œå¦‚æœæ‚¨ä¸ç†Ÿæ‚‰ç¼–ç¨‹ï¼Œå¯ä»¥å°†æœ¬æ–‡æ¡£äº¤ç»™ Claude Code / Codex CLI / Cursor / Copilot ç­‰ AI ç¼–ç¨‹å·¥å…·ï¼Œè®©å®ƒæ¥å¸®åŠ©æ‚¨å®Œæˆã€‚

### æ¦‚è¿°

æ¯é¦–æ­Œçš„è®­ç»ƒæ•°æ®åŒ…å«ä»¥ä¸‹å†…å®¹ï¼š

1. **éŸ³é¢‘æ–‡ä»¶** â€” æ”¯æŒ `.mp3`ã€`.wav`ã€`.flac`ã€`.ogg`ã€`.opus` æ ¼å¼
2. **æ­Œè¯** â€” ä¸éŸ³é¢‘åŒåçš„ `.lyrics.txt` æ–‡ä»¶ï¼ˆä¹Ÿå…¼å®¹ `.txt`ï¼‰
3. **æ ‡æ³¨æ•°æ®** â€” åŒ…å« `caption`ã€`bpm`ã€`keyscale`ã€`timesignature`ã€`language` ç­‰å…ƒä¿¡æ¯

### æ ‡æ³¨æ•°æ®æ ¼å¼

å¦‚æœæ‚¨å·²æ‹¥æœ‰å®Œæ•´çš„æ ‡æ³¨æ•°æ®ï¼Œå¯ä»¥æ„é€  JSON æ–‡ä»¶ï¼Œä¸éŸ³é¢‘ã€æ­Œè¯æ”¾ç½®åœ¨åŒä¸€ç›®å½•ã€‚æ–‡ä»¶ç»“æ„å¦‚ä¸‹ï¼š

```
dataset/
â”œâ”€â”€ song1.mp3               # éŸ³é¢‘
â”œâ”€â”€ song1.lyrics.txt        # æ­Œè¯
â”œâ”€â”€ song1.json              # æ ‡æ³¨ï¼ˆå¯é€‰ï¼‰
â”œâ”€â”€ song1.caption.txt       # captionï¼ˆå¯é€‰ï¼Œä¹Ÿå¯å†™åœ¨ json ä¸­ï¼‰
â”œâ”€â”€ song2.mp3
â”œâ”€â”€ song2.lyrics.txt
â”œâ”€â”€ song2.json
â””â”€â”€ ...
```

JSON æ–‡ä»¶ç»“æ„ï¼ˆæ‰€æœ‰å­—æ®µå‡ä¸ºå¯é€‰ï¼‰ï¼š

```json
{
    "caption": "A high-energy J-pop track with synthesizer leads and fast tempo",
    "bpm": 190,
    "keyscale": "D major",
    "timesignature": "4",
    "language": "ja"
}
```

å¦‚æœæ²¡æœ‰æ ‡æ³¨æ•°æ®ï¼Œå¯ä»¥é€šè¿‡åç»­ç« èŠ‚ä»‹ç»çš„æ–¹æ¡ˆè·å–ã€‚

---

### æ­Œè¯

å°†æ­Œè¯ä¿å­˜ä¸ºä¸éŸ³é¢‘åŒåçš„ `.lyrics.txt` æ–‡ä»¶ï¼Œæ”¾ç½®åœ¨ç›¸åŒç›®å½•ä¸‹ã€‚è¯·ç¡®ä¿æ­Œè¯å†…å®¹çš„å‡†ç¡®æ€§ã€‚

æ‰«ææ—¶çš„æ­Œè¯æ–‡ä»¶æŸ¥æ‰¾ä¼˜å…ˆçº§ï¼š

1. `{æ–‡ä»¶å}.lyrics.txt`ï¼ˆæ¨èï¼‰
2. `{æ–‡ä»¶å}.txt`ï¼ˆå‘åå…¼å®¹ï¼‰

#### æ­Œè¯è½¬å½•

å¦‚æœæ‚¨æ²¡æœ‰ç°æˆçš„æ­Œè¯æ–‡æœ¬ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å·¥å…·è½¬å½•è·å–ï¼š

| å·¥å…· | ç»“æ„åŒ–æ ‡ç­¾ | å‡†ç¡®æ€§ | ä½¿ç”¨éš¾åº¦ | éƒ¨ç½²æ–¹å¼ |
|------|-----------|--------|---------|---------|
| [acestep-transcriber](https://huggingface.co/ACE-Step/acestep-transcriber) | æ—  | å¯èƒ½æœ‰é”™åˆ«å­— | è¾ƒé«˜ï¼ˆéœ€éƒ¨ç½²æ¨¡å‹ï¼‰ | è‡ªéƒ¨ç½² |
| [Gemini](https://aistudio.google.com/) | æœ‰ | å¯èƒ½æœ‰é”™åˆ«å­— | ä½ | ä»˜è´¹ API |
| [Whisper](https://github.com/openai/whisper) | æ—  | å¯èƒ½æœ‰é”™åˆ«å­— | ä¸­ç­‰ | è‡ªéƒ¨ç½² / ä»˜è´¹ API |
| [ElevenLabs](https://elevenlabs.io/app/developers) | æ—  | å¯èƒ½æœ‰é”™åˆ«å­— | ä¸­ç­‰ | ä»˜è´¹ APIï¼ˆæœ‰å…è´¹é¢åº¦ï¼‰ |

æœ¬é¡¹ç›®åœ¨ `scripts/lora_data_prepare/` ä¸‹æä¾›äº†å¯¹åº”çš„è½¬å½•è„šæœ¬ï¼š

- `whisper_transcription.py` â€” è°ƒç”¨ OpenAI Whisper API è½¬å½•
- `elevenlabs_transcription.py` â€” è°ƒç”¨ ElevenLabs Scribe API è½¬å½•

ä¸¤ä¸ªè„šæœ¬å‡æ”¯æŒ `process_folder()` æ–¹æ³•æ‰¹é‡å¤„ç†æ•´ä¸ªæ–‡ä»¶å¤¹ã€‚

#### æ£€æŸ¥ä¸æ¸…æ´—ï¼ˆå¿…é¡»ï¼‰

æ¨¡å‹è½¬å½•å‡ºæ¥çš„æ­Œè¯å¯èƒ½åŒ…å«é”™åˆ«å­—ï¼Œ**å¿…é¡»äººå·¥æ£€æŸ¥å¹¶ä¿®æ­£**ã€‚

å¦‚æœæ‚¨ä½¿ç”¨çš„æ˜¯ LRC æ ¼å¼çš„æ­Œè¯ï¼Œéœ€è¦ç§»é™¤å…¶ä¸­çš„æ—¶é—´æˆ³ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç®€å•çš„æ¸…æ´—ç¤ºä¾‹ï¼š

```python
import re

def clean_lrc_content(lines):
    """æ¸…æ´— LRC æ–‡ä»¶å†…å®¹ï¼Œç§»é™¤æ—¶é—´æˆ³"""
    result = []
    for line in lines:
        line = line.strip()
        if not line:
            continue
        # ç§»é™¤æ—¶é—´æˆ³ [mm:ss.x] [mm:ss.xx] [mm:ss.xxx]
        cleaned = re.sub(r"\[\d{2}:\d{2}\.\d{1,3}\]", "", line)
        result.append(cleaned)

    # ç§»é™¤æœ«å°¾ç©ºè¡Œ
    while result and not result[-1]:
        result.pop()

    return result
```

#### ç»“æ„åŒ–æ ‡ç­¾ï¼ˆéå¿…é¡»ï¼‰

å¦‚æœæ­Œè¯åŒ…å«ç»“æ„åŒ–æ ‡ç­¾ï¼ˆå¦‚ `[Verse]`ã€`[Chorus]` ç­‰ï¼‰ï¼Œèƒ½å¤Ÿå¸®åŠ©æ¨¡å‹æ›´å¥½åœ°å­¦ä¹ æ­Œæ›²ç»“æ„ã€‚æ²¡æœ‰ç»“æ„åŒ–æ ‡ç­¾ä¹Ÿå¯ä»¥æ­£å¸¸è®­ç»ƒã€‚

> **æç¤ºï¼š** å¯ä»¥ä½¿ç”¨ [Gemini](https://aistudio.google.com/) ä¸ºå·²æœ‰æ­Œè¯æ·»åŠ ç»“æ„åŒ–æ ‡ç­¾ã€‚

ç¤ºä¾‹ï¼š

```
[Intro]
La la la...

[Verse 1]
Walking down the empty street
Echoes dancing at my feet

[Chorus]
We are the stars tonight
Shining through the endless sky

[Bridge]
Close your eyes and feel the sound
```

---

### è‡ªåŠ¨æ ‡æ³¨

#### 1. è·å– BPM å’Œ Key

ä½¿ç”¨ [Key-BPM-Finder](https://vocalremover.org/key-bpm-finder) åœ¨çº¿è·å– BPM å’Œè°ƒå¼æ ‡æ³¨ï¼š

1. æ‰“å¼€ç½‘é¡µåç‚¹å‡» **Browse my files**ï¼Œé€‰æ‹©å¾…å¤„ç†çš„éŸ³é¢‘æ–‡ä»¶ï¼ˆä¸€æ¬¡å¤„ç†è¿‡å¤šå¯èƒ½ä¼šå¡ä½ï¼Œå»ºè®®åˆ†æ‰¹å¤„ç†ååˆå¹¶ CSVï¼‰ã€‚å¤„ç†åœ¨æœ¬åœ°å®Œæˆï¼Œä¸ä¼šä¸Šä¼ è‡³æœåŠ¡å™¨ã€‚
   ![key-bpm-finder-0.jpg](../pics/key-bpm-finder-0.jpg)

2. å¤„ç†å®Œæˆåï¼Œç‚¹å‡» **Export CSV** ä¸‹è½½ CSV æ–‡ä»¶ã€‚
   ![key-bpm-finder-1.jpg](../pics/key-bpm-finder-1.jpg)

3. CSV æ–‡ä»¶å†…å®¹ç¤ºä¾‹ï¼š

   ```csv
   File,Artist,Title,BPM,Key,Camelot
   song1.wav,,,190,D major,10B
   song2.wav,,,128,A minor,8A
   ```

4. å°† CSV æ–‡ä»¶æ”¾ç½®åˆ°æ•°æ®é›†æ–‡ä»¶å¤¹ä¸­ã€‚å¦‚éœ€é™„åŠ  caption æ•°æ®ï¼Œå¯åœ¨ `Camelot` åˆ—åæ–°å¢ä¸€åˆ—ã€‚

#### 2. è·å– Caption

å¯é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–æ­Œæ›²çš„ caption æè¿°ï¼š

- **ä½¿ç”¨ acestep-5Hz-lm**ï¼ˆ0.6B / 1.7B / 4Bï¼‰â€” åœ¨ Gradio UI ä¸­é€šè¿‡ Auto Label åŠŸèƒ½è°ƒç”¨ï¼ˆè§åç»­æ“ä½œæ­¥éª¤ï¼‰
- **ä½¿ç”¨ Gemini API** â€” å‚è€ƒè„šæœ¬ `scripts/lora_data_prepare/gemini_caption.py`ï¼Œæ”¯æŒ `process_folder()` æ‰¹é‡å¤„ç†ï¼Œä¼šä¸ºæ¯ä¸ªéŸ³é¢‘ç”Ÿæˆï¼š
  - `{æ–‡ä»¶å}.lyrics.txt` â€” æ­Œè¯
  - `{æ–‡ä»¶å}.caption.txt` â€” caption æè¿°

---

## æ•°æ®é¢„å¤„ç†

å‡†å¤‡å¥½æ•°æ®åï¼Œå³å¯ä½¿ç”¨ Gradio UI è¿›è¡Œæ•°æ®æ£€æŸ¥ä¸é¢„å¤„ç†ã€‚

> **é‡è¦ï¼š** å¦‚æœä½¿ç”¨å¯åŠ¨è„šæœ¬å¯åŠ¨ï¼Œéœ€è¦ä¿®æ”¹å¯åŠ¨å‚æ•°ä»¥ç¦ç”¨æœåŠ¡é¢„åˆå§‹åŒ–ï¼š
>
> - **Windows** (`start_gradio_ui.bat`)ï¼šå°† `if not defined INIT_SERVICE set INIT_SERVICE=--init_service true` ä¿®æ”¹ä¸º `if not defined INIT_SERVICE set INIT_SERVICE=--init_service false`
> - **Linux/macOS** (`start_gradio_ui.sh`)ï¼šå°† `: "${INIT_SERVICE:=--init_service true}"` ä¿®æ”¹ä¸º `: "${INIT_SERVICE:=--init_service false}"`

å¯åŠ¨ Gradio UIï¼ˆé€šè¿‡å¯åŠ¨è„šæœ¬æˆ–ç›´æ¥è¿è¡Œ `acestep/acestep_v15_pipeline.py`ï¼‰ã€‚

### æ­¥éª¤ 1ï¼šåŠ è½½æ¨¡å‹

- **éœ€è¦ä½¿ç”¨ LM ç”Ÿæˆ caption çš„æƒ…å†µï¼š** åœ¨åˆå§‹åŒ–æ—¶å‹¾é€‰æƒ³è¦ä½¿ç”¨çš„ LM æ¨¡å‹ï¼ˆacestep-5Hz-lm-0.6B / 1.7B / 4Bï¼‰ã€‚
  ![](../pics/00_select_model_to_load.jpg)

- **ä¸éœ€è¦ä½¿ç”¨ LM çš„æƒ…å†µï¼š** ä¸è¦å‹¾é€‰ LM æ¨¡å‹ã€‚
  ![](../pics/00_select_model_to_load_1.jpg)

### æ­¥éª¤ 2ï¼šåŠ è½½æ•°æ®

åˆ‡æ¢åˆ° **LoRA Training** é€‰é¡¹å¡ï¼Œè¾“å…¥æ•°æ®é›†ç›®å½•è·¯å¾„ï¼Œç‚¹å‡» **Scan**ã€‚

æ‰«ææ—¶ä¼šè‡ªåŠ¨è¯†åˆ«ä»¥ä¸‹æ–‡ä»¶ï¼š

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| `*.mp3` / `*.wav` / `*.flac` / ... | éŸ³é¢‘æ–‡ä»¶ |
| `{æ–‡ä»¶å}.lyrics.txt`ï¼ˆæˆ– `{æ–‡ä»¶å}.txt`ï¼‰ | æ­Œè¯ |
| `{æ–‡ä»¶å}.caption.txt` | Caption æè¿° |
| `{æ–‡ä»¶å}.json` | æ ‡æ³¨å…ƒæ•°æ®ï¼ˆcaption / bpm / keyscale / timesignature / languageï¼‰ |
| `*.csv` | æ‰¹é‡ BPM / Key æ ‡æ³¨ï¼ˆç”± Key-BPM-Finder å¯¼å‡ºï¼‰ |

![](../pics/01_load_dataset_path.jpg)

### æ­¥éª¤ 3ï¼šé¢„è§ˆå¹¶è°ƒæ•´æ•°æ®é›†

- **Duration** â€” è‡ªåŠ¨ä»éŸ³é¢‘æ–‡ä»¶è¯»å–
- **Lyrics** â€” éœ€è¦å­˜åœ¨åŒå `.lyrics.txt` æ–‡ä»¶ï¼ˆä¹Ÿå…¼å®¹ `.txt`ï¼‰
- **Labeled** â€” å¦‚æœæœ‰ caption åˆ™æ˜¾ç¤º âœ…ï¼Œå¦åˆ™æ˜¾ç¤º âŒ
- **BPM / Key / Caption** â€” ä» JSON æˆ– CSV æ–‡ä»¶ä¸­åŠ è½½
- å¦‚æœæ•°æ®é›†å¹¶éå…¨éƒ¨ä¸ºçº¯éŸ³ä¹ï¼ˆInstrumentalï¼‰ï¼Œè¯·å–æ¶ˆå‹¾é€‰ **All Instrumental**
- **Format Lyrics** ä¸ **Transcribe Lyrics** åŠŸèƒ½å½“å‰æš‚æ—¶ç¦ç”¨ï¼ˆæœªæ¥å…¥ [acestep-transcriber](https://huggingface.co/ACE-Step/acestep-transcriber)ï¼Œç›´æ¥ä½¿ç”¨ LM å®¹æ˜“äº§ç”Ÿå¹»è§‰ï¼‰
- è¾“å…¥ **Custom Trigger Tag**ï¼ˆå½“å‰æ•ˆæœå°šä¸æ˜æ˜¾ï¼Œåªè¦ä¸é€‰ `Replace Caption` å³å¯ï¼‰
- **Genre Ratio** è¡¨ç¤ºä½¿ç”¨ genre æ›¿ä»£ caption çš„æ¯”ä¾‹ã€‚ç”±äºå½“å‰ LM ç”Ÿæˆçš„ genre æè¿°èƒ½åŠ›è¿œä¸åŠ captionï¼Œå»ºè®®ä¿æŒä¸º 0

![](../pics/02_preview_dataset.jpg)

### æ­¥éª¤ 4ï¼šAuto Label Data

- å¦‚æœå·²æœ‰ captionï¼Œå¯è·³è¿‡æ­¤æ­¥éª¤
- å¦‚æœæ•°æ®ç¼ºå°‘ captionï¼Œå¯é€šè¿‡ LM æ¨ç†ç”Ÿæˆ
- å¦‚æœç¼ºå°‘ BPM / Key ç­‰æ•°å€¼ï¼Œè¯·å…ˆä½¿ç”¨ [Key-BPM-Finder](https://vocalremover.org/key-bpm-finder) è·å–ï¼Œç›´æ¥ç”± LM ç”Ÿæˆä¼šäº§ç”Ÿå¹»è§‰

![](../pics/03_label_data.jpg)

### æ­¥éª¤ 5ï¼šé¢„è§ˆå¹¶ç¼–è¾‘æ•°æ®

å¦‚æœ‰éœ€è¦ï¼Œå¯ä»¥é€æ¡æ£€æŸ¥å¹¶ä¿®æ”¹æ•°æ®ã€‚**æ¯æ¡æ•°æ®ä¿®æ”¹åè¯·è®°å¾—ç‚¹å‡»ä¿å­˜ã€‚**

![](../pics/04_edit_data.jpg)

### æ­¥éª¤ 6ï¼šä¿å­˜æ•°æ®é›†

è¾“å…¥ä¿å­˜è·¯å¾„ï¼Œå°†æ•°æ®é›†ä¿å­˜ä¸º JSON æ–‡ä»¶ã€‚

![](../pics/05_save_dataset.jpg)

### æ­¥éª¤ 7ï¼šé¢„å¤„ç†ç”Ÿæˆ Tensor æ–‡ä»¶

> **æ³¨æ„ï¼š** å¦‚æœæ­¤å‰ä½¿ç”¨äº† LM ç”Ÿæˆ caption ä¸”æ˜¾å­˜ä¸è¶³ï¼Œå»ºè®®å…ˆé‡å¯ Gradio é‡Šæ”¾æ˜¾å­˜ï¼Œé‡å¯æ—¶**ä¸è¦å‹¾é€‰ LM æ¨¡å‹**ã€‚é‡å¯åï¼Œåœ¨è¾“å…¥æ¡†ä¸­å¡«å…¥å·²ä¿å­˜çš„ JSON æ–‡ä»¶è·¯å¾„å¹¶åŠ è½½ã€‚

è¾“å…¥ Tensor æ–‡ä»¶çš„ä¿å­˜è·¯å¾„ï¼Œç‚¹å‡»å¼€å§‹é¢„å¤„ç†ï¼Œç­‰å¾…ç”Ÿæˆå®Œæˆã€‚

![](../pics/06_preprocess_tensor.jpg)

---

## è®­ç»ƒ

> **æ³¨æ„ï¼š** ç”Ÿæˆ Tensor æ–‡ä»¶åï¼ŒåŒæ ·å»ºè®®é‡å¯ Gradio ä»¥é‡Šæ”¾æ˜¾å­˜ã€‚

1. åˆ‡æ¢åˆ° **Train LoRA** é€‰é¡¹å¡ï¼Œè¾“å…¥ Tensor æ–‡ä»¶è·¯å¾„å¹¶åŠ è½½æ•°æ®é›†ã€‚
2. å¦‚æœæ‚¨å¯¹è®­ç»ƒå‚æ•°ä¸ç†Ÿæ‚‰ï¼Œé€šå¸¸ä½¿ç”¨é»˜è®¤å€¼å³å¯ã€‚

### å‚æ•°å‚è€ƒ

| å‚æ•° | è¯´æ˜ | å»ºè®®å€¼ |
|------|------|--------|
| **Max Epochs** | æ ¹æ®æ•°æ®é›†å¤§å°è°ƒæ•´ | çº¦ 100 é¦–æ­Œ â†’ 500 epochï¼›10â€“20 é¦–æ­Œ â†’ 800 epochï¼ˆä»…ä¾›å‚è€ƒï¼‰ |
| **Batch Size** | æ˜¾å­˜å……è¶³æ—¶å¯é€‚å½“å¢å¤§ | 1ï¼ˆé»˜è®¤ï¼‰ï¼Œæ˜¾å­˜è¶³å¤Ÿçš„è¯ å¯å°è¯• 2 æˆ– 4 |
| **Save Every N Epochs** | Checkpoint ä¿å­˜é—´éš” | Max Epochs è¾ƒå°æ—¶å¯è®¾å°ä¸€äº›ï¼Œè¾ƒå¤§æ—¶å¯è®¾å¤§ä¸€äº› |

> ä»¥ä¸Šæ•°å€¼ä»…ä¾›å‚è€ƒï¼Œè¯·æ ¹æ®å®é™…æƒ…å†µè°ƒæ•´ã€‚

> **ğŸ’¡ æ¨èä½¿ç”¨ LoKrï¼š** LoKR å¤§å¹…æå‡äº†è®­ç»ƒæ•ˆç‡ï¼ŒåŸæœ¬éœ€è¦ä¸€å°æ—¶çš„è®­ç»ƒç°åœ¨åªéœ€ 5 åˆ†é’Ÿâ€”â€”é€Ÿåº¦æå‡è¶…è¿‡ 10 å€ã€‚è¿™å¯¹äºåœ¨æ¶ˆè´¹çº§ GPU ä¸Šè®­ç»ƒå°¤ä¸ºå…³é”®ã€‚æ‚¨å¯ä»¥åœ¨ **Train LoKr** é€‰é¡¹å¡ä¸­å°è¯• LoKr è®­ç»ƒï¼Œæˆ–ä½¿ç”¨ [Side-Step](https://github.com/koda-dernet/Side-Step) å·¥å…·åŒ…è¿›è¡Œå‘½ä»¤è¡Œ LoKr è®­ç»ƒã€‚è¯¦è§ [Training Guide](../sidestep/Training%20Guide.md)ã€‚

3. ç‚¹å‡» **Start Training**ï¼Œç­‰å¾…è®­ç»ƒå®Œæˆã€‚

![](../pics/07_train.jpg)

---

## ä½¿ç”¨ LoRA

1. è®­ç»ƒå®Œæˆå**é‡å¯ Gradio**ï¼Œé‡æ–°åŠ è½½æ¨¡å‹ï¼ˆä¸è¦å‹¾é€‰ LM æ¨¡å‹ï¼‰ã€‚
2. æ¨¡å‹åˆå§‹åŒ–å®Œæˆåï¼ŒåŠ è½½è®­ç»ƒå¥½çš„ LoRA æƒé‡ã€‚
   ![](../pics/08_load_lora.jpg)
3. å¼€å§‹åˆæˆéŸ³ä¹ã€‚

æ­å–œï¼æ‚¨å·²å®Œæˆ LoRA è®­ç»ƒçš„å…¨éƒ¨æµç¨‹ã€‚

---

## é«˜çº§è®­ç»ƒï¼šSide-Step

å¦‚æœä½ éœ€è¦æ›´ç²¾ç»†åœ°æ§åˆ¶ LoRA è®­ç»ƒâ€”â€”åŒ…æ‹¬ä¿®æ­£çš„æ—¶é—´æ­¥é‡‡æ ·ã€LoKR é€‚é…å™¨ã€å‘½ä»¤è¡Œå·¥ä½œæµã€æ˜¾å­˜ä¼˜åŒ–å’Œæ¢¯åº¦æ•æ„Ÿåº¦åˆ†æâ€”â€”ç¤¾åŒºå¼€å‘çš„ **[Side-Step](https://github.com/koda-dernet/Side-Step)** å·¥å…·åŒ…æä¾›äº†é«˜çº§æ›¿ä»£æ–¹æ¡ˆã€‚å…¶æ–‡æ¡£å·²æ”¶å½•åœ¨æœ¬ä»“åº“çš„ `docs/sidestep/` ç›®å½•ä¸‹ã€‚

| ä¸»é¢˜ | è¯´æ˜ |
|------|------|
| [Getting Started](../sidestep/Getting%20Started.md) | å®‰è£…ã€å‰ç½®æ¡ä»¶å’Œé¦–æ¬¡è¿è¡Œè®¾ç½® |
| [End-to-End Tutorial](../sidestep/End-to-End%20Tutorial.md) | ä»åŸå§‹éŸ³é¢‘åˆ°ç”Ÿæˆçš„å®Œæ•´æµç¨‹ |
| [Dataset Preparation](../sidestep/Dataset%20Preparation.md) | JSON æ ¼å¼ã€éŸ³é¢‘è¦æ±‚ã€å…ƒæ•°æ®å­—æ®µã€è‡ªå®šä¹‰æ ‡ç­¾ |
| [Training Guide](../sidestep/Training%20Guide.md) | LoRA vs LoKRã€ä¿®æ­£æ¨¡å¼ vs åŸå§‹æ¨¡å¼ã€è¶…å‚æ•°æŒ‡å— |
| [Using Your Adapter](../sidestep/Using%20Your%20Adapter.md) | è¾“å‡ºç›®å½•ç»“æ„ã€åœ¨ Gradio ä¸­åŠ è½½ã€LoKR é™åˆ¶ |
| [VRAM Optimization Guide](../sidestep/VRAM%20Optimization%20Guide.md) | æ˜¾å­˜ä¼˜åŒ–ç­–ç•¥å’Œ GPU åˆ†çº§é…ç½® |
| [Estimation Guide](../sidestep/Estimation%20Guide.md) | æ¢¯åº¦æ•æ„Ÿåº¦åˆ†æï¼Œç”¨äºé’ˆå¯¹æ€§è®­ç»ƒ |
| [Shift and Timestep Sampling](../sidestep/Shift%20and%20Timestep%20Sampling.md) | è®­ç»ƒæ—¶é—´æ­¥çš„å·¥ä½œåŸç†ï¼ŒSide-Step ä¸å†…ç½®è®­ç»ƒå™¨çš„åŒºåˆ« |
| [Preset Management](../sidestep/Preset%20Management.md) | å†…ç½®é¢„è®¾ã€ä¿å­˜/åŠ è½½/å¯¼å…¥/å¯¼å‡º |
| [The Settings Wizard](../sidestep/The%20Settings%20Wizard.md) | å®Œæ•´çš„å‘å¯¼è®¾ç½®å‚è€ƒ |
| [Model Management](../sidestep/Model%20Management.md) | æ£€æŸ¥ç‚¹ç»“æ„å’Œå¾®è°ƒæ¨¡å‹æ”¯æŒ |
| [Windows Notes](../sidestep/Windows%20Notes.md) | Windows ç‰¹å®šçš„è®¾ç½®å’Œæ³¨æ„äº‹é¡¹ |
